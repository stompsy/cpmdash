{% extends "base.html" %}
{% load static %}
{% block pageName %}profile{% endblock pageName %}
{% block title %}User Profile{% endblock title %}
{% block content %}
    <!-- Profile redesigned to match site header style -->
    <section class="col-span-12 mb-16 space-y-12">
        <!-- Header card with scenic image background -->
        <div class="relative overflow-hidden rounded-2xl border border-white/5 px-6 py-16 sm:px-10 lg:px-16">
                <div class="absolute inset-0 -z-10 bg-cover bg-center"
                     style="background-image: url('{% static 'media/jacob-grishey-j8iPllhcWWg-unsplash.jpg' %}')">
                </div>
                <div class="absolute inset-0 -z-10 bg-[linear-gradient(90deg,rgba(2,6,23,0.92)_0%,rgba(2,6,23,0.88)_28%,rgba(2,6,23,0.58)_60%,rgba(2,6,23,0.28)_80%,rgba(2,6,23,0.12)_100%)]"></div>
                <div class="pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_top_left,rgba(23,51,212,0.14),transparent_60%)]"></div>
                <div class="pointer-events-none absolute right-[-14%] top-[-28%] h-[28rem] w-[28rem] rounded-full bg-brand-400/16 blur-[140px]"></div>
                <div class="relative mx-auto max-w-7xl">
                    <div class="grid items-start gap-10 lg:grid-cols-12">
                        <!-- Left: title and copy -->
                        <div class="lg:col-span-8 pl-6 sm:pl-8">
                            <p class="inline-flex items-center text-center md:text-left gap-2 rounded-lg bg-white/5 px-4 py-3 text-[11px] font-semibold uppercase tracking-[0.35em] text-brand-200/90">
                                My Profile
                            </p>
                            <h1 class="mt-8 text-4xl text-center md:text-left font-semibold tracking-tight text-white sm:text-5xl lg:text-[3.25rem]">
                                {{ request.user.get_full_name|default:request.user.username }}
                            </h1>
                            {% if profile_user.bio %}
                                <p class="mt-8 max-w-2xl text-base text-center md:text-left leading-relaxed text-slate-300 sm:text-lg">
                                    {{ profile_user.bio }}
                                </p>
                            {% else %}
                                <p class="mt-8 max-w-2xl text-base text-center md:text-left leading-relaxed text-slate-300 sm:text-lg">
                                    Manage your account details, avatar, and contact information.
                                </p>
                            {% endif %}
                            <div class="mt-8 w-full flex justify-center md:justify-start">
                                <button @click="isProfileInfoModal = true"
                                        class="inline-flex items-center gap-2 rounded-full bg-brand-500/80 px-5 py-2 text-sm font-semibold text-slate-900 shadow transition hover:bg-brand-400 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-brand-300">
                                    <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M12 5v14" />
                                        <path d="M5 12h14" />
                                    </svg>
                                    Edit Profile
                                </button>
                            </div>
                        </div>
                        <!-- Right: avatar and social buttons inside header -->
                        <div class="lg:col-span-4 xl:self-center lg:px-6 xl:px-8">
                            <div class="flex flex-col items-center lg:items-center lg:w-fit lg:mx-auto">
                                <div class="h-28 w-28 lg:h-32 lg:w-32 xl:h-36 xl:w-36 2xl:h-40 2xl:w-40 overflow-hidden rounded-full border-4 border-white/10 ring-1 ring-white/10 shadow-xl">
                                    {% if profile_user.avatar %}
                                        <img src="{{ profile_user.avatar.url }}" alt="{{ profile_user.get_full_name|default:profile_user.username }}" height="160" width="160" class="h-full w-full object-cover" />
                                    {% else %}
                                        <img src="{% static 'media/user/user-bgerdes.png' %}" alt="{{ profile_user.get_full_name|default:profile_user.username }}" height="160" width="160" class="h-full w-full object-cover" />
                                    {% endif %}
                                </div>
                                <div class="mt-4 flex items-center justify-center gap-3">
                                    <button class="flex h-10 w-10 items-center justify-center rounded-full border border-white/10 bg-white/5 text-slate-200 shadow-sm transition hover:bg-white/10 focus:outline-none focus-visible:ring-2 focus-visible:ring-brand-300" aria-label="Share on Facebook">
                                        <svg class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"><path d="M11.6666 11.2503H13.7499L14.5833 7.91699H11.6666V6.25033C11.6666 5.39251 11.6666 4.58366 13.3333 4.58366H14.5833V1.78374C14.3118 1.7477 13.2858 1.66699 12.2023 1.66699C9.94025 1.66699 8.33325 3.04771 8.33325 5.58342V7.91699H5.83325V11.2503H8.33325V18.3337H11.6666V11.2503Z"/></svg>
                                    </button>
                                    <button class="flex h-10 w-10 items-center justify-center rounded-full border border-white/10 bg-white/5 text-slate-200 shadow-sm transition hover:bg-white/10 focus:outline-none focus-visible:ring-2 focus-visible:ring-brand-300" aria-label="Share on X">
                                        <svg class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"><path d="M15.1708 1.875H17.9274L11.9049 8.75833L18.9899 18.125H13.4424L9.09742 12.4442L4.12578 18.125H1.36745L7.80912 10.7625L1.01245 1.875H6.70078L10.6283 7.0675L15.1708 1.875ZM14.2033 16.475H15.7308L5.87078 3.43833H4.23162L14.2033 16.475Z"/></svg>
                                    </button>
                                    <button class="flex h-10 w-10 items-center justify-center rounded-full border border-white/10 bg-white/5 text-slate-200 shadow-sm transition hover:bg-white/10 focus:outline-none focus-visible:ring-2 focus-visible:ring-brand-300" aria-label="Share on LinkedIn">
                                        <svg class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"><path d="M5.78381 4.16645C5.78351 4.84504 5.37181 5.45569 4.74286 5.71045C4.11391 5.96521 3.39331 5.81321 2.92083 5.32613C2.44836 4.83904 2.31837 4.11413 2.59216 3.49323C2.86596 2.87233 3.48886 2.47942 4.16715 2.49978C5.06804 2.52682 5.78422 3.26515 5.78381 4.16645ZM5.83381 7.06645H2.50048V17.4998H5.83381V7.06645ZM11.1005 7.06645H7.78381V17.4998H11.0672V12.0248C11.0672 8.97475 15.0422 8.69142 15.0422 12.0248V17.4998H18.3338V10.8914C18.3338 5.74978 12.4505 5.94145 11.0672 8.46642L11.1005 7.06645Z"/></svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
        </div>
        <!-- Main content container matching header inner width and left start -->
        <div class="px-6 sm:px-10 lg:px-16">
            <div class="relative mx-auto max-w-7xl space-y-10">
            <!-- Overview card -->
            <div class="rounded-2xl border border-white/10 bg-slate-900/60 p-6 sm:p-8 shadow-[0_16px_38px_rgba(15,23,42,0.28)] backdrop-blur">
                <h2 class="text-xl font-semibold text-white flex items-center">
                    <svg class="w-6 h-6 mr-3 text-brand-300" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"/><path stroke-linecap="round" stroke-linejoin="round" d="M4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"/></svg>
                    Profile overview
                </h2>
                <div class="mt-5 grid grid-cols-1 gap-4 sm:grid-cols-2">
                    <div class="text-sm text-slate-200"><p class="font-medium text-slate-400">Name</p><p class="mt-1">{{ request.user.get_full_name|default:request.user.username }}</p></div>
                    <div class="text-sm text-slate-200"><p class="font-medium text-slate-400">Username</p><p class="mt-1">{{ profile_user.username }}</p></div>
                    <div class="text-sm text-slate-200"><p class="font-medium text-slate-400">Email</p><p class="mt-1"><a class="text-brand-200 hover:text-brand-100 underline/30 hover:underline" href="mailto:{{ profile_user.email }}">{{ profile_user.email|default:"—" }}</a></p></div>
                    <div class="text-sm text-slate-200 sm:col-span-2"><p class="font-medium text-slate-400">Bio</p><p class="mt-1">{{ profile_user.bio|default:"—"|truncatechars:160 }}</p></div>
                </div>
            </div>

            <!-- Inline edit form removed; editing now happens exclusively in the modal. -->
            <!-- Location card -->
            <div class="rounded-2xl border border-white/10 bg-slate-900/60 p-6 sm:p-8 shadow-[0_16px_38px_rgba(15,23,42,0.28)] backdrop-blur">
                <h2 class="text-xl font-semibold text-white flex items-center">
                    <svg class="w-6 h-6 mr-3 text-green-300" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"/><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"/></svg>
                    Location & address
                </h2>
                <div class="mt-5 grid grid-cols-1 gap-4 sm:grid-cols-2">
                    <div class="text-sm text-slate-200"><p class="font-medium text-slate-400">Country</p><p class="mt-1">United States</p></div>
                    <div class="text-sm text-slate-200"><p class="font-medium text-slate-400">City/State</p><p class="mt-1">Washington</p></div>
                    <div class="text-sm text-slate-200"><p class="font-medium text-slate-400">Postal Code</p><p class="mt-1">98382</p></div>
                </div>
            </div>

            <!-- Account details card -->
            <div class="rounded-2xl border border-white/10 bg-slate-900/60 p-6 sm:p-8 shadow-[0_16px_38px_rgba(15,23,42,0.28)] backdrop-blur">
                <h2 class="text-xl font-semibold text-white flex items-center">
                    <svg class="w-6 h-6 mr-3 text-sky-300" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12a7.5 7.5 0 0 1 15 0v3.75A2.25 2.25 0 0 1 17.25 18H6.75A2.25 2.25 0 0 1 4.5 15.75V12Z"/><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 18v.75A2.25 2.25 0 0 0 10.5 21h3a2.25 2.25 0 0 0 2.25-2.25V18"/></svg>
                    Account details
                </h2>
                <div class="mt-5 grid grid-cols-1 gap-4 sm:grid-cols-2">
                    <div class="text-sm text-slate-200"><p class="font-medium text-slate-400">Member since</p><p class="mt-1">{{ profile_user.date_joined|date:"M d, Y"|default:"—" }}</p></div>
                    <div class="text-sm text-slate-200"><p class="font-medium text-slate-400">Last login</p><p class="mt-1">{{ profile_user.last_login|date:"M d, Y, g:i A"|default:"—" }}</p></div>
                </div>
            </div>
            </div>
        </div>
    </section>
{% endblock content %}
