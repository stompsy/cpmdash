{% extends "base.html" %}
{% load static %}
{% block pageName %}profile{% endblock pageName %}
{% block title %}User Profile{% endblock title %}

{% block page_header %}
    {% static 'media/jacob-grishey-j8iPllhcWWg-unsplash.jpg' as profile_header_image %}
    {% with eyebrow="My Account" title=request.user.get_full_name|default:request.user.username description="Manage your account details, avatar, and contact information." image_src=profile_header_image image_alt="User profile" image_width="960" image_height="640" %}
        {% include "partials/page_header.html" %}
    {% endwith %}
{% endblock page_header %}

{% block content %}
    <div class="col-span-12 mx-auto w-full">
        <span data-page-name="profile" class="hidden" hidden></span>
        <div class="mx-auto max-w-6xl px-6 py-20 space-y-24">

        {# Profile Actions Section #}
        <div class="flex flex-col items-center gap-6 sm:flex-row sm:justify-between">
            <div class="flex items-center gap-4">
                <div class="h-20 w-20 overflow-hidden rounded-full border-4 border-white/10 ring-1 ring-white/10 shadow-xl">
                    {% if profile_user.avatar %}
                        <img src="{{ profile_user.avatar.url }}" alt="{{ profile_user.get_full_name|default:profile_user.username }}" width="80" height="80" class="h-full w-full object-cover" />
                    {% else %}
                        <img src="{% static 'media/user/user-bgerdes.png' %}" alt="{{ profile_user.get_full_name|default:profile_user.username }}" width="80" height="80" class="h-full w-full object-cover" />
                    {% endif %}
                </div>
                <div>
                    <h2 class="text-xl font-bold text-gray-900 dark:text-white">{{ request.user.get_full_name|default:request.user.username }}</h2>
                    <p class="text-sm text-gray-600 dark:text-slate-400">@{{ profile_user.username }}</p>
                </div>
            </div>
            <button
                @click="isProfileInfoModal = true"
                class="inline-flex items-center gap-2 rounded-full bg-brand-500 px-6 py-2.5 text-sm font-semibold text-white transition hover:bg-brand-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-brand-300"
            >
                <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"/>
                </svg>
                Edit Profile
            </button>
        </div>

        {# Profile Content Grid #}
        <div class="mb-16 space-y-6">
            <!-- Profile Overview Card -->
            <div class="rounded-2xl border border-slate-200/80 bg-white shadow-lg shadow-slate-200/50 dark:border-slate-700/60 dark:bg-gradient-to-br dark:from-slate-900/95 dark:to-slate-800/95 dark:shadow-slate-900/50">
                <div class="border-b border-slate-200/60 bg-gradient-to-r from-slate-50/50 to-transparent px-6 py-5 sm:px-8 dark:border-slate-700/50 dark:from-slate-800/30">
                    <h3 class="flex items-center text-lg font-semibold text-gray-900 dark:text-white">
                        <svg class="mr-3 h-5 w-5 text-brand-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" d="M4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"/>
                        </svg>
                        Profile Overview
                    </h3>
                </div>
                <div class="p-6 sm:p-8">
                    <dl class="grid grid-cols-1 gap-6 sm:grid-cols-2">
                        <div>
                            <dt class="text-sm font-medium text-gray-600 dark:text-slate-400">Full Name</dt>
                            <dd class="mt-1 text-base text-gray-900 dark:text-slate-200">{{ request.user.get_full_name|default:request.user.username }}</dd>
                        </div>
                        <div>
                            <dt class="text-sm font-medium text-gray-600 dark:text-slate-400">Username</dt>
                            <dd class="mt-1 text-base text-gray-900 dark:text-slate-200">{{ profile_user.username }}</dd>
                        </div>
                        <div class="sm:col-span-2">
                            <dt class="text-sm font-medium text-gray-600 dark:text-slate-400">Email</dt>
                            <dd class="mt-1 text-base">
                                <a class="text-brand-500 underline-offset-2 hover:text-brand-400 hover:underline dark:text-brand-300 dark:hover:text-brand-200" href="mailto:{{ profile_user.email }}">
                                    {{ profile_user.email|default:"—" }}
                                </a>
                            </dd>
                        </div>
                        <div class="sm:col-span-2">
                            <dt class="text-sm font-medium text-gray-600 dark:text-slate-400">Bio</dt>
                            <dd class="mt-1 text-base text-gray-900 dark:text-slate-200">{{ profile_user.bio|default:"—"|truncatechars:160 }}</dd>
                        </div>
                    </dl>
                </div>
            </div>

            <!-- Location Card -->
            <div class="rounded-2xl border border-slate-200/80 bg-white shadow-lg shadow-slate-200/50 dark:border-slate-700/60 dark:bg-gradient-to-br dark:from-slate-900/95 dark:to-slate-800/95 dark:shadow-slate-900/50">
                <div class="border-b border-slate-200/60 bg-gradient-to-r from-slate-50/50 to-transparent px-6 py-5 sm:px-8 dark:border-slate-700/50 dark:from-slate-800/30">
                    <h3 class="flex items-center text-lg font-semibold text-gray-900 dark:text-white">
                        <svg class="mr-3 h-5 w-5 text-emerald-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"/>
                        </svg>
                        Location & Address
                    </h3>
                </div>
                <div class="p-6 sm:p-8">
                    <dl class="grid grid-cols-1 gap-6 sm:grid-cols-2">
                        <div>
                            <dt class="text-sm font-medium text-gray-600 dark:text-slate-400">Country</dt>
                            <dd class="mt-1 text-base text-gray-900 dark:text-slate-200">United States</dd>
                        </div>
                        <div>
                            <dt class="text-sm font-medium text-gray-600 dark:text-slate-400">City/State</dt>
                            <dd class="mt-1 text-base text-gray-900 dark:text-slate-200">Washington</dd>
                        </div>
                        <div>
                            <dt class="text-sm font-medium text-gray-600 dark:text-slate-400">Postal Code</dt>
                            <dd class="mt-1 text-base text-gray-900 dark:text-slate-200">98382</dd>
                        </div>
                    </dl>
                </div>
            </div>

            <!-- Account Details Card -->
            <div class="rounded-2xl border border-slate-200/80 bg-white shadow-lg shadow-slate-200/50 dark:border-slate-700/60 dark:bg-gradient-to-br dark:from-slate-900/95 dark:to-slate-800/95 dark:shadow-slate-900/50">
                <div class="border-b border-slate-200/60 bg-gradient-to-r from-slate-50/50 to-transparent px-6 py-5 sm:px-8 dark:border-slate-700/50 dark:from-slate-800/30">
                    <h3 class="flex items-center text-lg font-semibold text-gray-900 dark:text-white">
                        <svg class="mr-3 h-5 w-5 text-sky-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z"/>
                        </svg>
                        Account Details
                    </h3>
                </div>
                <div class="p-6 sm:p-8">
                    <dl class="grid grid-cols-1 gap-6 sm:grid-cols-2">
                        <div>
                            <dt class="text-sm font-medium text-gray-600 dark:text-slate-400">Member Since</dt>
                            <dd class="mt-1 text-base text-gray-900 dark:text-slate-200">{{ profile_user.date_joined|date:"M d, Y"|default:"—" }}</dd>
                        </div>
                        <div>
                            <dt class="text-sm font-medium text-gray-600 dark:text-slate-400">Last Login</dt>
                            <dd class="mt-1 text-base text-gray-900 dark:text-slate-200">{{ profile_user.last_login|date:"M d, Y, g:i A"|default:"—" }}</dd>
                        </div>
                    </dl>
                </div>
            </div>
        </div>
        </div>
    </div>
{% endblock content %}
