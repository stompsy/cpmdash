{% extends "base.html" %}
{% load static %}

{% block pageName %}cpmTimeline{% endblock pageName %}
{% block title %}{{ title }}{% endblock title %}

{% block page_header %}
{% static 'media/brian_kneeling_dark.png' as timeline_header_image %}
{% with eyebrow="Program briefings" title=title description=description image_src=timeline_header_image image_alt="Community paramedics reviewing program milestones" image_width="960" image_height="640" updated_at=page_header_updated_at updated_at_iso=page_header_updated_at_iso read_time=page_header_read_time %}
    {% include "partials/page_header.html" %}
{% endwith %}
{% endblock page_header %}

{% block content %}
<div class="col-span-12 mx-auto mt-16 w-full max-w-7xl">
    <span data-page-name="cpmTimeline" class="hidden" hidden></span>
    <div class="space-y-16">
        <!-- Timeline entries -->
        <section class="col-span-12">
            <div class="px-6 sm:px-12 md:px-20 py-6">
                <div class="w-full max-w-3xl mx-auto">
                    <div class="-my-6">
                        {% for entry in timeline_entries %}
                            <div class="relative pl-8 sm:pl-32 py-6 group">
                                <div class="text-sm font-semibold uppercase tracking-[0.3em] text-indigo-600 dark:text-indigo-300 mb-1 sm:mb-0">
                                    {{ entry.tagline }}
                                </div>
                                <div class="flex flex-col sm:flex-row items-start gap-3 sm:gap-6 mb-2
                                            group-last:before:hidden
                                            before:absolute before:left-2 sm:before:left-0 before:h-full before:px-px before:bg-slate-300 dark:before:bg-slate-700
                                            sm:before:ml-[6.5rem] before:self-start before:-translate-x-1/2 before:translate-y-3
                                            after:absolute after:left-2 sm:after:left-0 after:w-2 after:h-2 after:bg-indigo-600 dark:after:bg-indigo-400
                                            after:border-4 after:box-content after:border-white dark:after:border-slate-900 after:rounded-full
                                            sm:after:ml-[6.5rem] after:-translate-x-1/2 after:translate-y-1.5">
                                    <time class="sm:absolute -left-5 inline-flex items-center justify-center text-xs font-semibold uppercase tracking-[0.3em] w-24 h-7 mb-3 sm:mb-0 text-emerald-600 bg-emerald-100 dark:text-emerald-200 dark:bg-emerald-500/15 border border-emerald-200 dark:border-emerald-500/40 rounded-full">
                                        {{ entry.year }}
                                    </time>
                                    <div class="text-lg font-semibold leading-relaxed text-gray-900 dark:text-gray-100 sm:text-xl">
                                        {{ entry.lead }}
                                    </div>
                                </div>

                                <div class="text-sm leading-relaxed text-gray-700 dark:text-gray-300 sm:text-base space-y-6">
                                    {% if entry.bullets %}
                                        <ul class="space-y-3">
                                            {% for item in entry.bullets %}
                                                <li class="flex gap-3">
                                                    <span class="mt-1 inline-flex h-2.5 w-2.5 flex-none rounded-full bg-sky-500/80 dark:bg-sky-400/80"></span>
                                                    <span>{{ item }}</span>
                                                </li>
                                            {% endfor %}
                                        </ul>
                                    {% endif %}

                                    {% if entry.sections %}
                                        <div class="space-y-6">
                                            {% for section in entry.sections %}
                                                <div class="rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900/80 p-5 shadow-sm">
                                                    <h3 class="text-xs font-semibold uppercase tracking-[0.3em] text-indigo-600 dark:text-indigo-300">
                                                        {{ section.title }}
                                                    </h3>
                                                    <ul class="mt-4 space-y-3 text-sm leading-relaxed text-gray-700 dark:text-gray-300">
                                                        {% for item in section.items %}
                                                            <li class="flex gap-3">
                                                                <span class="mt-1 inline-flex h-2 w-2 flex-none rounded-full bg-purple-500/80 dark:bg-purple-400/80"></span>
                                                                <span>{{ item }}</span>
                                                            </li>
                                                        {% endfor %}
                                                    </ul>
                                                </div>
                                            {% endfor %}
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </section>
    </div>
</div>
{% endblock content %}
